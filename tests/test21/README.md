## 测试场景-服务的 EffectScope 生命周期管理

### 测试目的

验证框架为服务提供的 EffectScope 生命周期管理机制，以及属性响应式与组件生命周期的集成。

### 测试要点

1. **服务实例关联的 EffectScope**
   - 框架为每个服务实例创建并维护一个 Effect 作用域
   - 可以通过 `getEffectScope(this)` API 获取服务实例关联的效果作用域
   - 测试验证这个作用域在服务有效期间一直保持活跃状态

2. **自定义效果的注册与清理**
   - 测试在服务的作用域内注册自定义清理回调
   - 使用 `onScopeDispose` 注册的回调只有在作用域销毁时才会触发
   - 服务作用域存在期间，清理回调不会被调用

3. **@Computed 装饰器与响应式更新**
   - 服务类中 `@Computed` 装饰的计算属性在内部使用了 EffectScope
   - 测试验证不同视图中的计算属性根据依赖项变化正确更新
   - 当 `count` 值在点击按钮后由 1 变为 2时，`sum` 属性䳎 101 自动更新为 102

4. **组件卸载与服务清理**
   - 当组件卸载时，框架自动关闭相关联的服务作用域
   - 验证组件卸载后，服务的 `scope.active` 状态变为 `false`
   - 所有通过 `onScopeDispose` 注册的回调被正确触发

这个测试用例展示了框架如何集成 Vue 的 EffectScope 机制来管理服务的响应式效果和生命周期。通过这一机制，服务实例可以在组件卸载时正确地清理其内部的响应式效果和计算属性，避免内存泄漏和无用计算的发生。
